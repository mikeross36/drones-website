"use strict";class Cart{async getItems(){try{const e=await fetch("/data/cart-data/cart-items.json");return await e.json()}catch(e){console.log(e)}}displayCartItems(e){let t="";e.forEach((e=>{t+=`\n                <figure class="cart__card">\n                    <div class="cart__box">\n                        <img src="${e.image}" alt="" class="cart__img">\n                    </div>\n                    <div class="cart__details">\n                        <h4 class="cart__title">${e.title}</h4>\n                        <span class="cart__price">${e.price} €</span>\n                        <div class="cart__amount">\n                            <div class="cart__amount-content">\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-down.svg" alt="" width="20px" height="20px">\n                                </span>\n                                <span class="cart_amount-number">0</span>\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-up.svg" alt="" width="20px" height="20px">\n                                </span>\n                            </div>\n                            <img src="/app/images/can-trash.svg" alt="" class="cart__amount-trash" width="20px" height="20px">\n                        </div>\n                    </div>\n                </figure>\n            `}));const n=document.querySelector(".cart__container");n&&n.insertAdjacentHTML("beforeend",t)}toggleCart(){const e=document.getElementById("cart"),t=document.getElementById("cart-shop"),n=document.getElementById("cart-close");t&&t.addEventListener("click",(()=>{e.classList.add("show-cart")})),n&&n.addEventListener("click",(()=>{e.classList.remove("show-cart")}))}}(async()=>{const e=new Cart,t=await e.getItems();e.displayCartItems(t),e.toggleCart()})();class Featured{getItems=async()=>{try{const e=await fetch("/data/featured-data/featured-items.json");return await e.json()}catch(e){console.error(e)}};displayItems=e=>{let t="";e.forEach((e=>{t+=`\n                <article class="featured__card">\n                    <span class="featured__tag">sale</span>\n                    <img src="${e.image}" alt="featured" class="featured__img">\n                    <div clas="featured__data">\n                        <h3 class="featured__title">${e.title}</h3>\n                        <span class="featured__price">${e.price}</span>\n                        <button class="button featured__button">add to cart</button>\n                    </div>\n                </article>\n            `}));const n=document.querySelector(".featured__container");n&&n.insertAdjacentHTML("beforeend",t)}}(async()=>{const e=new Featured,t=await e.getItems();e.displayItems(t)})();const domElements=()=>{const e=document.querySelector(".nav__list"),t=document.querySelector(".nav__menu");return{navList:e,navMenu:t,closeNavMenu:()=>{t&&t.classList.remove("show-menu")}}};let{navList:navList,navMenu:navMenu,closeNavMenu:closeNavMenu}=domElements();class NavLinks{getLinks=async()=>{try{const e=await fetch("/data/nav-data/navlinks.json");return await e.json()}catch(e){console.error(e)}};displayLinks=e=>{let t="";e.forEach((e=>{t+=`\n                <li class="nav__item">\n                    <a href="${e.link}" class="nav__link" onclick="closeNavMenu()">${e.text}</a>\n                </li>\n            `})),navList&&navList.insertAdjacentHTML("beforeend",t)}}(async()=>{const e=new NavLinks,t=await e.getLinks();e.displayLinks(t)})();class Drones{async getDrones(){try{const e=await fetch("/data/new-data/new-data.json");return await e.json()}catch(e){console.error(e)}}displayDrones=e=>{const t=document.querySelector(".new__container");e.forEach((e=>{t.insertAdjacentHTML("beforeend",`\n                <article class="new__card">\n                    <span class="new__tag">New</span>\n                    <img src="${e.image}" alt="new drone" class="new__img">\n                    <div class="new__data">\n                        <h3 class="new__title">${e.title}</h3>\n                        <span class="new__price">${e.price}</span>\n                    </div>\n                    <ul class="new__social">\n                        <li>\n                            <a href="${e.faceUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.faceIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                        <li>\n                            <a href="${e.twitterUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.twitterIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                        <li>\n                            <a href="${e.instaUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.instaIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                    </ul>\n                </article>`)}))}}(async()=>{const e=new Drones,t=await e.getDrones();e.displayDrones(t)})();class Products{async getProducts(){try{const e=await fetch("/data/product-data/product-items.json");return await e.json()}catch(e){console.log(e)}}displayProducts(e){let t="";e.forEach((e=>{t+=`\n                <figure class="products__card">\n                    <img src="${e.image}" alt="" class="products__img">\n                    <h3 class="products__title">${e.title}</h3>\n                    <span class="products__price">${e.price} €</span>\n                    <button class="products__button">\n                        <img src="/app/images/shopping-cart.svg" alt="" width="30px" height="30px">\n                    </button>\n                </figure>\n            `}));const n=document.querySelector(".products__container");return n&&n.insertAdjacentHTML("beforeend",t),e}}(async()=>{const e=new Products,t=await e.getProducts();e.displayProducts(t)})();class Team{async getTeam(){try{const e=await fetch("/data/team-data/team-data.json");return await e.json()}catch(e){console.error(e)}}displayTeam(e){const t=document.querySelector(".team__container");e.forEach((e=>{t&&t.insertAdjacentHTML("beforeend",`\n                    <div class="team__card">\n                        <div class="team__card-bcg">\n                            <img src="/app/images/bg-image.jpg" alt="">\n                        </div>\n                        <div class="team__member-pic">\n                            <img src="${e.image}" alt="member">\n                        </div>\n                        <div class="team__memeber-info">\n                            <h4 class="team__member-name">${e.name}</h4>\n                            <span>${e.title}</span>\n                            <p>${e.story}</p>\n                            <ul class="team__social">\n                                <li>\n                                    <a href="${e.faceUrl}" target="_blank">\n                                        <img src="${e.faceIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.twitterUrl}" target="_blank">\n                                        <img src="${e.twitterIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.instaUrl}" target="_blank">\n                                        <img src="${e.instaIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.githubUrl}" target="_blank">\n                                        <img src="${e.githubIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                `)}))}}function toggleSearch(){const e=document.querySelector(".nav__search"),t=document.querySelector(".nav__search-form"),n=document.querySelector(".close__search"),a=document.querySelector(".nav__search-input");t&&(e.addEventListener("click",(()=>{t.classList.toggle("active-form")})),n.addEventListener("click",(()=>{t.classList.remove("active-form"),a.value=""})))}function filterSearch(){const e=document.querySelector(".nav__search-input").value.toLowerCase();document.querySelectorAll("section").forEach((t=>{e&&t.id.toString().toLowerCase().indexOf(e)>-1&&document.getElementById(t.id).scrollIntoView()}))}function headerOnScroll(){const e=document.getElementById("header");document.body.scrollTop>0||document.documentElement.scrollTop>0?(e.style.background="#1f1f1f",e.style.boxShadow="0 1px 4px #0a0a0a4d"):0!==document.body.scrollTop&&0!==document.documentElement.scrollTop||(e.style.background="transparent",e.style.boxShadow="none")}function sliderAction(){const e=[...document.querySelectorAll(".testimonial__slide")],t=document.querySelector(".slider__button-next"),n=document.querySelector(".slider__button-prev");let a=0;n.addEventListener("click",(()=>{e[a].classList.remove("active"),a=(a-1+e.length)%e.length,e[a].classList.add("active")})),t.addEventListener("click",(()=>{e[a].classList.remove("active"),a=(a+1)%e.length,e[a].classList.add("active")}))}function toggleMobMenu(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-toggle"),n=document.getElementById("nav-close"),a=document.querySelector(".nav__search-form");e&&(t.addEventListener("click",(()=>{e.classList.add("show-menu"),function(){if(a.classList.contains("active-form"))a.classList.remove("active-form")}()})),n.addEventListener("click",(()=>{e.classList.remove("show-menu")})))}(async()=>{const e=new Team,t=await e.getTeam();e.displayTeam(t)})(),window.onscroll=function(){headerOnScroll()},toggleMobMenu(),toggleSearch(),sliderAction();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlDYXJ0SXRlbXMuanMiLCJkaXNwbGF5RmVhdHVyZWQuanMiLCJkaXNwbGF5TmF2TGlua3MuanMiLCJkaXNwbGF5TmV3LmpzIiwiZGlzcGxheVByb2RjdXRzLmpzIiwiZGlzcGxheVRlYW0uanMiLCJmaWx0ZXJTZWFyY2guanMiLCJpbmRleC5qcyIsInNsaWRlckFjdGlvbi5qcyIsInRvZ2dsZU1vYk1lbnUuanMiXSwibmFtZXMiOlsiQ2FydCIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJkaXNwbGF5Q2FydEl0ZW1zIiwiaXRlbXMiLCJyZXN1bHQiLCJmb3JFYWNoIiwiaXRlbSIsImltYWdlIiwidGl0bGUiLCJwcmljZSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImluc2VydEFkamFjZW50SFRNTCIsInRvZ2dsZUNhcnQiLCJjYXJ0IiwiZ2V0RWxlbWVudEJ5SWQiLCJjYXJ0U2hvcCIsImNhcnRDbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZXRJdGVtcyIsIkZlYXR1cmVkIiwiZGlzcGxheUl0ZW1zIiwiZWxlbWVudCIsImZlYXR1cmVkIiwiZG9tRWxlbWVudHMiLCJuYXZMaXN0IiwibmF2TWVudSIsImNsb3NlTmF2TWVudSIsIk5hdkxpbmtzIiwiZ2V0TGlua3MiLCJkaXNwbGF5TGlua3MiLCJsaW5rcyIsImxpbmsiLCJ0ZXh0IiwibmF2TGlua3MiLCJEcm9uZXMiLCJkaXNwbGF5RHJvbmVzIiwiZHJvbmVzIiwiZHJvbmUiLCJmYWNlVXJsIiwiZmFjZUljb24iLCJ0d2l0dGVyVXJsIiwidHdpdHRlckljb24iLCJpbnN0YVVybCIsImluc3RhSWNvbiIsImFwaURyb25lcyIsImdldERyb25lcyIsIlByb2R1Y3RzIiwiZGlzcGxheVByb2R1Y3RzIiwicHJvZHVjdHMiLCJwcm9kdWN0IiwiYXBpUHJvZHVjdHMiLCJnZXRQcm9kdWN0cyIsIlRlYW0iLCJkaXNwbGF5VGVhbSIsIm1lbWJlcnMiLCJtZW1iZXIiLCJuYW1lIiwic3RvcnkiLCJnaXRodWJVcmwiLCJnaXRodWJJY29uIiwidG9nZ2xlU2VhcmNoIiwic2VhcmNoQnRuIiwibmF2U2VhcmNoRm9ybSIsImNsb3NlU2VhcmNoIiwiaW5wdXQiLCJ0b2dnbGUiLCJ2YWx1ZSIsImZpbHRlclNlYXJjaCIsInNlYXJjaFRlcm0iLCJ0b0xvd2VyQ2FzZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWN0aW9uIiwiaWQiLCJ0b1N0cmluZyIsImluZGV4T2YiLCJzY3JvbGxJbnRvVmlldyIsImhlYWRlck9uU2Nyb2xsIiwiaGVhZGVyIiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwiYmFja2dyb3VuZCIsImJveFNoYWRvdyIsInNsaWRlckFjdGlvbiIsInNsaWRlcyIsIm5leHRCdG4iLCJwcmV2QnRuIiwiY3VycmVudFNsaWRlIiwibGVuZ3RoIiwidG9nZ2xlTW9iTWVudSIsIm5hdlRvZ2dsZSIsIm5hdkNsb3NlIiwiY29udGFpbnMiLCJjbG9zZVNlYXJjaEZvcm0iLCJ0ZWFtIiwiZ2V0VGVhbSIsIndpbmRvdyIsIm9uc2Nyb2xsIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQUFBLEtBQ0FDLGlCQUNBLElBQ0EsTUFBQUMsUUFBQUMsTUFBQSxtQ0FFQSxhQURBRCxFQUFBRSxPQUdBLE1BQUFDLEdBQ0FDLFFBQUFDLElBQUFGLElBSUFHLGlCQUFBQyxHQUNBLElBQUFDLEVBQUEsR0FDQUQsRUFBQUUsU0FBQUMsSUFDQUYsR0FBQSxpSUFHQUUsRUFBQUMsa0tBR0FELEVBQUFFLGlFQUNBRixFQUFBRyw4NEJBaUJBLE1BQUFDLEVBQUFDLFNBQUFDLGNBQUEsb0JBQ0FGLEdBQUFBLEVBQUFHLG1CQUFBLFlBQUFULEdBR0FVLGFBQ0EsTUFBQUMsRUFBQUosU0FBQUssZUFBQSxRQUNBQyxFQUFBTixTQUFBSyxlQUFBLGFBQ0FFLEVBQUFQLFNBQUFLLGVBQUEsY0FFQUMsR0FDQUEsRUFBQUUsaUJBQUEsU0FBQSxLQUNBSixFQUFBSyxVQUFBQyxJQUFBLGdCQUlBSCxHQUNBQSxFQUFBQyxpQkFBQSxTQUFBLEtBQ0FKLEVBQUFLLFVBQUFFLE9BQUEsaUJBTUEsV0FDQSxNQUFBUCxFQUFBLElBQUFyQixLQUNBUyxRQUFBWSxFQUFBUSxXQUNBUixFQUFBYixpQkFBQUMsR0FDQVksRUFBQUQsY0FKQSxHQzlEQSxNQUFBVSxTQUNBRCxTQUFBNUIsVUFDQSxJQUNBLE1BQUFDLFFBQUFDLE1BQUEsMkNBR0EsYUFGQUQsRUFBQUUsT0FJQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxLQUlBMEIsYUFBQXRCLElBQ0EsSUFBQXVCLEVBQUEsR0FDQXZCLEVBQUFFLFNBQUFDLElBQ0FvQixHQUFBLGtKQUdBcEIsRUFBQUMsc0pBRUFELEVBQUFFLHFFQUNBRixFQUFBRyw4S0FNQSxNQUFBQyxFQUFBQyxTQUFBQyxjQUFBLHdCQUNBRixHQUFBQSxFQUFBRyxtQkFBQSxZQUFBYSxJQUlBLFdBQ0EsTUFBQUMsRUFBQSxJQUFBSCxTQUNBckIsUUFBQXdCLEVBQUFKLFdBQ0FJLEVBQUFGLGFBQUF0QixJQUhBLEdDakNBLE1BQUF5QixZQUFBLEtBQ0EsTUFBQUMsRUFBQWxCLFNBQUFDLGNBQUEsY0FDQWtCLEVBQUFuQixTQUFBQyxjQUFBLGNBTUEsTUFBQSxDQUFBaUIsVUFBQUMsVUFBQUMsYUFMQSxLQUNBRCxHQUNBQSxFQUFBVixVQUFBRSxPQUFBLGdCQU1BLElBQUFPLFFBQUFBLFFBQUFDLFFBQUFBLFFBQUFDLGFBQUFBLGNBQUFILGNBRUEsTUFBQUksU0FDQUMsU0FBQXRDLFVBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLGdDQUVBLGFBREFELEVBQUFFLE9BR0EsTUFBQUMsR0FDQUMsUUFBQUQsTUFBQUEsS0FJQW1DLGFBQUFDLElBQ0EsSUFBQS9CLEVBQUEsR0FDQStCLEVBQUE5QixTQUFBK0IsSUFDQWhDLEdBQUEsMEVBRUFnQyxFQUFBQSxvREFBQUEsRUFBQUMsbURBSUFSLFNBQUFBLFFBQUFoQixtQkFBQSxZQUFBVCxJQUlBLFdBQ0EsTUFBQWtDLEVBQUEsSUFBQU4sU0FDQUcsUUFBQUcsRUFBQUwsV0FFQUssRUFBQUosYUFBQUMsSUFKQSxHQ3RDQSxNQUFBSSxPQUNBNUMsa0JBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLGdDQUVBLGFBREFELEVBQUFFLE9BR0EsTUFBQUMsR0FDQUMsUUFBQUQsTUFBQUEsSUFJQXlDLGNBQUFDLElBQ0EsTUFBQS9CLEVBQUFDLFNBQUFDLGNBQUEsbUJBQ0E2QixFQUFBcEMsU0FBQXFDLElBQ0FoQyxFQUFBRyxtQkFBQSxZQUFBLHVJQUdBNkIsRUFBQW5DLHlJQUVBbUMsRUFBQWxDLGdFQUNBa0MsRUFBQWpDLDhKQUlBaUMsRUFBQUMsaUdBQ0FELEVBQUFFLHFMQUlBRixFQUFBRyxvR0FDQUgsRUFBQUksd0xBSUFKLEVBQUFLLGtHQUNBTCxFQUFBTSw2S0FVQSxXQUNBLE1BQUFQLEVBQUEsSUFBQUYsT0FDQVUsUUFBQVIsRUFBQVMsWUFDQVQsRUFBQUQsY0FBQVMsSUFIQSxHQ2hEQSxNQUFBRSxTQUNBeEQsb0JBQ0EsSUFDQSxNQUFBQyxRQUFBQyxNQUFBLHlDQUVBLGFBREFELEVBQUFFLE9BR0EsTUFBQUMsR0FDQUMsUUFBQUMsSUFBQUYsSUFJQXFELGdCQUFBQyxHQUNBLElBQUFqRCxFQUFBLEdBQ0FpRCxFQUFBaEQsU0FBQWlELElBQ0FsRCxHQUFBLG9GQUVBa0QsRUFBQS9DLHlGQUNBK0MsRUFBQTlDLGlFQUNBOEMsRUFBQTdDLHdQQU9BLE1BQUFDLEVBQUFDLFNBQUFDLGNBQUEsd0JBSUEsT0FIQUYsR0FDQUEsRUFBQUcsbUJBQUEsWUFBQVQsR0FFQWlELEdBSUEsV0FDQSxNQUFBRSxFQUFBLElBQUFKLFNBQ0FFLFFBQUFFLEVBQUFDLGNBQ0FELEVBQUFILGdCQUFBQyxJQUhBLEdDaENBLE1BQUFJLEtBQ0E5RCxnQkFDQSxJQUNBLE1BQUFDLFFBQUFDLE1BQUEsa0NBRUEsYUFEQUQsRUFBQUUsT0FHQSxNQUFBQyxHQUNBQyxRQUFBRCxNQUFBQSxJQUlBMkQsWUFBQUMsR0FDQSxNQUFBakQsRUFBQUMsU0FBQUMsY0FBQSxvQkFDQStDLEVBQUF0RCxTQUFBdUQsSUFDQWxELEdBQ0FBLEVBQUFHLG1CQUFBLFlBQUEsZ1RBTUErQyxFQUFBckQsNktBR0FxRCxFQUFBQyxnREFDQUQsRUFBQXBELGdEQUNBb0QsRUFBQUUsd0pBR0FGLEVBQUFqQixnRkFDQWlCLEVBQUFoQixxTkFJQWdCLEVBQUFmLG1GQUNBZSxFQUFBZCx3TkFJQWMsRUFBQWIsaUZBQ0FhLEVBQUFaLHNOQUlBWSxFQUFBRyxrRkFDQUgsRUFBQUksd1BDaERBLFNBQUFDLGVBQ0EsTUFBQUMsRUFBQXZELFNBQUFDLGNBQUEsZ0JBQ0F1RCxFQUFBeEQsU0FBQUMsY0FBQSxxQkFDQXdELEVBQUF6RCxTQUFBQyxjQUFBLGtCQUNBeUQsRUFBQTFELFNBQUFDLGNBQUEsc0JBRUF1RCxJQUNBRCxFQUFBL0MsaUJBQUEsU0FBQSxLQUNBZ0QsRUFBQS9DLFVBQUFrRCxPQUFBLGtCQUdBRixFQUFBakQsaUJBQUEsU0FBQSxLQUNBZ0QsRUFBQS9DLFVBQUFFLE9BQUEsZUFDQStDLEVBQUFFLE1BQUEsT0FLQSxTQUFBQyxlQUNBLE1BQ0FDLEVBREE5RCxTQUFBQyxjQUFBLHNCQUNBMkQsTUFBQUcsY0FDQS9ELFNBQUFnRSxpQkFBQSxXQUVBdEUsU0FBQXVFLElBQ0FILEdBQUFHLEVBQUFDLEdBQUFDLFdBQUFKLGNBQUFLLFFBQUFOLElBQUEsR0FDQTlELFNBQUFLLGVBQUE0RCxFQUFBQyxJQUFBRyxvQkN2QkEsU0FBQUMsaUJBQ0EsTUFBQUMsRUFBQXZFLFNBQUFLLGVBQUEsVUFFQUwsU0FBQXdFLEtBQUFDLFVBQUEsR0FBQXpFLFNBQUEwRSxnQkFBQUQsVUFBQSxHQUNBRixFQUFBSSxNQUFBQyxXQUFBLFVBQ0FMLEVBQUFJLE1BQUFFLFVBQUEsdUJBRUEsSUFBQTdFLFNBQUF3RSxLQUFBQyxXQUFBLElBQUF6RSxTQUFBMEUsZ0JBQUFELFlBQ0FGLEVBQUFJLE1BQUFDLFdBQUEsY0FDQUwsRUFBQUksTUFBQUUsVUFBQSxRQ1hBLFNBQUFDLGVBQ0EsTUFBQUMsRUFBQSxJQUFBL0UsU0FBQWdFLGlCQUFBLHdCQUNBZ0IsRUFBQWhGLFNBQUFDLGNBQUEsd0JBQ0FnRixFQUFBakYsU0FBQUMsY0FBQSx3QkFDQSxJQUFBaUYsRUFBQSxFQWNBRCxFQUFBekUsaUJBQUEsU0FaQSxLQUNBdUUsRUFBQUcsR0FBQXpFLFVBQUFFLE9BQUEsVUFDQXVFLEdBQUFBLEVBQUEsRUFBQUgsRUFBQUksUUFBQUosRUFBQUksT0FDQUosRUFBQUcsR0FBQXpFLFVBQUFDLElBQUEsYUFVQXNFLEVBQUF4RSxpQkFBQSxTQVBBLEtBQ0F1RSxFQUFBRyxHQUFBekUsVUFBQUUsT0FBQSxVQUNBdUUsR0FBQUEsRUFBQSxHQUFBSCxFQUFBSSxPQUNBSixFQUFBRyxHQUFBekUsVUFBQUMsSUFBQSxhQ2ZBLFNBQUEwRSxnQkFDQSxNQUFBakUsRUFBQW5CLFNBQUFLLGVBQUEsWUFDQWdGLEVBQUFyRixTQUFBSyxlQUFBLGNBQ0FpRixFQUFBdEYsU0FBQUssZUFBQSxhQUNBbUQsRUFBQXhELFNBQUFDLGNBQUEscUJBRUFrQixJQUNBa0UsRUFBQTdFLGlCQUFBLFNBQUEsS0FDQVcsRUFBQVYsVUFBQUMsSUFBQSxhQVNBLFdBQ0EsR0FBQThDLEVBQUEvQyxVQUFBOEUsU0FBQSxlQUNBL0IsRUFBQS9DLFVBQUFFLE9BQUEsZUFWQTZFLE1BR0FGLEVBQUE5RSxpQkFBQSxTQUFBLEtBQ0FXLEVBQUFWLFVBQUFFLE9BQUEsaUJKK0NBLFdBQ0EsTUFBQThFLEVBQUEsSUFBQTNDLEtBQ0FFLFFBQUF5QyxFQUFBQyxVQUNBRCxFQUFBMUMsWUFBQUMsSUFIQSxHRTdDQTJDLE9BQUFDLFNBQUEsV0FDQXRCLGtCQUlBYyxnQkFDQTlCLGVBQ0F3QiIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgQ2FydCB7XHJcbiAgICBhc3luYyBnZXRJdGVtcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvY2FydC1kYXRhL2NhcnQtaXRlbXMuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUNhcnRJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSBgXHJcbiAgICAgICAgICAgICAgICA8ZmlndXJlIGNsYXNzPVwiY2FydF9fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0X19ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2l0ZW0uaW1hZ2V9XCIgYWx0PVwiXCIgY2xhc3M9XCJjYXJ0X19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FydF9fZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJjYXJ0X190aXRsZVwiPiR7aXRlbS50aXRsZX08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhcnRfX3ByaWNlXCI+JHtpdGVtLnByaWNlfSDigqw8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0X19hbW91bnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0X19hbW91bnQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fYW1vdW50LWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2NoZXZyb24tZG93bi5zdmdcIiBhbHQ9XCJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9hbW91bnQtbnVtYmVyXCI+MDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhcnRfX2Ftb3VudC1ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvYXBwL2ltYWdlcy9jaGV2cm9uLXVwLnN2Z1wiIGFsdD1cIlwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiL2FwcC9pbWFnZXMvY2FuLXRyYXNoLnN2Z1wiIGFsdD1cIlwiIGNsYXNzPVwiY2FydF9fYW1vdW50LXRyYXNoXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZmlndXJlPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnRfX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGlmIChjb250YWluZXIpIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgcmVzdWx0KVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUNhcnQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FydFwiKVxyXG4gICAgICAgIGNvbnN0IGNhcnRTaG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXJ0LXNob3BcIilcclxuICAgICAgICBjb25zdCBjYXJ0Q2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhcnQtY2xvc2VcIilcclxuICAgIFxyXG4gICAgICAgIGlmIChjYXJ0U2hvcCkge1xyXG4gICAgICAgICAgICBjYXJ0U2hvcC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FydC5jbGFzc0xpc3QuYWRkKFwic2hvdy1jYXJ0XCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGNhcnRDbG9zZSkge1xyXG4gICAgICAgICAgICBjYXJ0Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcnQuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctY2FydFwiKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gbmV3IENhcnQoKVxyXG4gICAgY29uc3QgaXRlbXMgPSBhd2FpdCBjYXJ0LmdldEl0ZW1zKClcclxuICAgIGNhcnQuZGlzcGxheUNhcnRJdGVtcyhpdGVtcylcclxuICAgIGNhcnQudG9nZ2xlQ2FydCgpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNsYXNzIEZlYXR1cmVkIHtcclxuICAgIGdldEl0ZW1zID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9mZWF0dXJlZC1kYXRhL2ZlYXR1cmVkLWl0ZW1zLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXMpXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlJdGVtcyA9IGl0ZW1zID0+IHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IFwiXCI7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudCArPSBgXHJcbiAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cImZlYXR1cmVkX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmZWF0dXJlZF9fdGFnXCI+c2FsZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5pbWFnZX1cIiBhbHQ9XCJmZWF0dXJlZFwiIGNsYXNzPVwiZmVhdHVyZWRfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhcz1cImZlYXR1cmVkX19kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZlYXR1cmVkX190aXRsZVwiPiR7aXRlbS50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZlYXR1cmVkX19wcmljZVwiPiR7aXRlbS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZmVhdHVyZWRfX2J1dHRvblwiPmFkZCB0byBjYXJ0PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZlYXR1cmVkX19jb250YWluZXJcIik7XHJcbiAgICAgICAgaWYoY29udGFpbmVyKSBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGVsZW1lbnQpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgZmVhdHVyZWQgPSBuZXcgRmVhdHVyZWQoKVxyXG4gICAgY29uc3QgaXRlbXMgPSBhd2FpdCBmZWF0dXJlZC5nZXRJdGVtcygpXHJcbiAgICBmZWF0dXJlZC5kaXNwbGF5SXRlbXMoaXRlbXMpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNvbnN0IGRvbUVsZW1lbnRzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbmF2TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19saXN0XCIpXHJcbiAgICBjb25zdCBuYXZNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX21lbnVcIilcclxuICAgIGNvbnN0IGNsb3NlTmF2TWVudSA9ICgpID0+IHtcclxuICAgICAgICBpZiAobmF2TWVudSkge1xyXG4gICAgICAgICAgICBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge25hdkxpc3QsIG5hdk1lbnUsIGNsb3NlTmF2TWVudX1cclxufTtcclxuXHJcbmxldCB7bmF2TGlzdCwgbmF2TWVudSwgY2xvc2VOYXZNZW51fSA9IGRvbUVsZW1lbnRzKClcclxuXHJcbmNsYXNzIE5hdkxpbmtzIHtcclxuICAgIGdldExpbmtzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9uYXYtZGF0YS9uYXZsaW5rcy5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlua3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5TGlua3MgPSBsaW5rcyA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgbGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IGBcclxuICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cIm5hdl9faXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2xpbmsubGlua31cIiBjbGFzcz1cIm5hdl9fbGlua1wiIG9uY2xpY2s9XCJjbG9zZU5hdk1lbnUoKVwiPiR7bGluay50ZXh0fTwvYT5cclxuICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobmF2TGlzdCkgbmF2TGlzdC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgcmVzdWx0KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG5hdkxpbmtzID0gbmV3IE5hdkxpbmtzKClcclxuICAgIGNvbnN0IGxpbmtzID0gYXdhaXQgbmF2TGlua3MuZ2V0TGlua3MoKVxyXG5cclxuICAgIG5hdkxpbmtzLmRpc3BsYXlMaW5rcyhsaW5rcylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgRHJvbmVzIHtcclxuICAgIGFzeW5jIGdldERyb25lcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvbmV3LWRhdGEvbmV3LWRhdGEuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBkcm9uZXMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGRyb25lcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlEcm9uZXMgPSBkcm9uZXMgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3X19jb250YWluZXJcIilcclxuICAgICAgICBkcm9uZXMuZm9yRWFjaChkcm9uZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYFxyXG4gICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJuZXdfX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5ld19fdGFnXCI+TmV3PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtkcm9uZS5pbWFnZX1cIiBhbHQ9XCJuZXcgZHJvbmVcIiBjbGFzcz1cIm5ld19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5ld19fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJuZXdfX3RpdGxlXCI+JHtkcm9uZS50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5ld19fcHJpY2VcIj4ke2Ryb25lLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJuZXdfX3NvY2lhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtkcm9uZS5mYWNlVXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwibmV3X19zb2NpYWwtbGlua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtkcm9uZS5mYWNlSWNvbn1cIiBhbHQ9XCJcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2Ryb25lLnR3aXR0ZXJVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJuZXdfX3NvY2lhbC1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Ryb25lLnR3aXR0ZXJJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7ZHJvbmUuaW5zdGFVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJuZXdfX3NvY2lhbC1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Ryb25lLmluc3RhSWNvbn1cIiBhbHQ9XCJcIiB3aWR0aD1cIjMwcHhcIiBoZWlnaHQ9XCIzMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5gXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGRyb25lcyA9IG5ldyBEcm9uZXMoKVxyXG4gICAgY29uc3QgYXBpRHJvbmVzID0gYXdhaXQgZHJvbmVzLmdldERyb25lcygpXHJcbiAgICBkcm9uZXMuZGlzcGxheURyb25lcyhhcGlEcm9uZXMpXHJcbn0pKCk7IiwiY2xhc3MgUHJvZHVjdHN7XHJcbiAgICBhc3luYyBnZXRQcm9kdWN0cygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvcHJvZHVjdC1kYXRhL3Byb2R1Y3QtaXRlbXMuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheVByb2R1Y3RzKHByb2R1Y3RzKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgcHJvZHVjdHMuZm9yRWFjaChwcm9kdWN0ID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IGBcclxuICAgICAgICAgICAgICAgIDxmaWd1cmUgY2xhc3M9XCJwcm9kdWN0c19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtwcm9kdWN0LmltYWdlfVwiIGFsdD1cIlwiIGNsYXNzPVwicHJvZHVjdHNfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cInByb2R1Y3RzX190aXRsZVwiPiR7cHJvZHVjdC50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdHNfX3ByaWNlXCI+JHtwcm9kdWN0LnByaWNlfSDigqw8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2R1Y3RzX19idXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvYXBwL2ltYWdlcy9zaG9wcGluZy1jYXJ0LnN2Z1wiIGFsdD1cIlwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZmlndXJlPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3RzX19jb250YWluZXJcIilcclxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgcmVzdWx0KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvZHVjdHM7XHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgYXBpUHJvZHVjdHMgPSBuZXcgUHJvZHVjdHMoKVxyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBhcGlQcm9kdWN0cy5nZXRQcm9kdWN0cygpXHJcbiAgICBhcGlQcm9kdWN0cy5kaXNwbGF5UHJvZHVjdHMocHJvZHVjdHMpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNsYXNzIFRlYW0ge1xyXG4gICAgYXN5bmMgZ2V0VGVhbSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvdGVhbS1kYXRhL3RlYW0tZGF0YS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IG1lbWJlcnMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIG1lbWJlcnNcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlUZWFtKG1lbWJlcnMpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlYW1fX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIG1lbWJlcnMuZm9yRWFjaChtZW1iZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGBcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVhbV9fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVhbV9fY2FyZC1iY2dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiL2FwcC9pbWFnZXMvYmctaW1hZ2UuanBnXCIgYWx0PVwiXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVhbV9fbWVtYmVyLXBpY1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21lbWJlci5pbWFnZX1cIiBhbHQ9XCJtZW1iZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZWFtX19tZW1lYmVyLWluZm9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cInRlYW1fX21lbWJlci1uYW1lXCI+JHttZW1iZXIubmFtZX08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHttZW1iZXIudGl0bGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHttZW1iZXIuc3Rvcnl9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwidGVhbV9fc29jaWFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHttZW1iZXIuZmFjZVVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttZW1iZXIuZmFjZUljb259XCIgYWx0PVwiXCIgd2lkdGg9XCIyNXB4XCIgaGVpZ2h0PVwiMjVweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke21lbWJlci50d2l0dGVyVXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21lbWJlci50d2l0dGVySWNvbn1cIiBhbHQ9XCJcIiB3aWR0aD1cIjI1cHhcIiBoZWlnaHQ9XCIyNXB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7bWVtYmVyLmluc3RhVXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21lbWJlci5pbnN0YUljb259XCIgYWx0PVwiXCIgd2lkdGg9XCIyNXB4XCIgaGVpZ2h0PVwiMjVweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke21lbWJlci5naXRodWJVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bWVtYmVyLmdpdGh1Ykljb259XCIgYWx0PVwiXCIgd2lkdGg9XCIyNXB4XCIgaGVpZ2h0PVwiMjVweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgdGVhbSA9IG5ldyBUZWFtKClcclxuICAgIGNvbnN0IG1lbWJlcnMgPSBhd2FpdCB0ZWFtLmdldFRlYW0oKVxyXG4gICAgdGVhbS5kaXNwbGF5VGVhbShtZW1iZXJzKVxyXG59KSgpOyIsImZ1bmN0aW9uIHRvZ2dsZVNlYXJjaCgpIHtcclxuICAgIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19zZWFyY2hcIilcclxuICAgIGNvbnN0IG5hdlNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fc2VhcmNoLWZvcm1cIilcclxuICAgIGNvbnN0IGNsb3NlU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZV9fc2VhcmNoXCIpXHJcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19zZWFyY2gtaW5wdXRcIik7XHJcblxyXG4gICAgaWYgKG5hdlNlYXJjaEZvcm0pIHtcclxuICAgICAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbmF2U2VhcmNoRm9ybS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlLWZvcm1cIilcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjbG9zZVNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBuYXZTZWFyY2hGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtZm9ybVwiKVxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyU2VhcmNoKCkge1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fc2VhcmNoLWlucHV0XCIpXHJcbiAgICBjb25zdCBzZWFyY2hUZXJtID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgY29uc3Qgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2VjdGlvblwiKVxyXG5cclxuICAgIHNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcbiAgICAgICAgaWYgKHNlYXJjaFRlcm0gJiYgc2VjdGlvbi5pZC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2hUZXJtKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb24uaWQpLnNjcm9sbEludG9WaWV3KClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59OyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5mdW5jdGlvbiBoZWFkZXJPblNjcm9sbCgpIHtcclxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyXCIpO1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IDAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IDApIHtcclxuICAgICAgICBoZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9IFwiIzFmMWYxZlwiO1xyXG4gICAgICAgIGhlYWRlci5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgMXB4IDRweCAjMGEwYTBhNGRcIjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPT09IDAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9PT0gMCl7XHJcbiAgICAgICAgaGVhZGVyLnN0eWxlLmJhY2tncm91bmQgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgaGVhZGVyLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiXHJcbiAgICB9XHJcbn07XHJcblxyXG53aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgIGhlYWRlck9uU2Nyb2xsKClcclxufTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB0b2dnbGVNb2JNZW51KClcclxuICAgIHRvZ2dsZVNlYXJjaCgpXHJcbiAgICBzbGlkZXJBY3Rpb24oKVxyXG59KSgpO1xyXG4iLCJmdW5jdGlvbiBzbGlkZXJBY3Rpb24oKXtcclxuICAgIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRlc3RpbW9uaWFsX19zbGlkZVwiKV1cclxuICAgIGNvbnN0IG5leHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fYnV0dG9uLW5leHRcIilcclxuICAgIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fYnV0dG9uLXByZXZcIilcclxuICAgIGxldCBjdXJyZW50U2xpZGUgPSAwO1xyXG5cclxuICAgIGNvbnN0IHByZXZTbGlkZSA9ICgpID0+IHtcclxuICAgICAgICBzbGlkZXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXHJcbiAgICAgICAgY3VycmVudFNsaWRlID0gKGN1cnJlbnRTbGlkZSAtIDEgKyBzbGlkZXMubGVuZ3RoKSAlIHNsaWRlcy5sZW5ndGg7XHJcbiAgICAgICAgc2xpZGVzW2N1cnJlbnRTbGlkZV0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5leHRTbGlkZSA9ICgpID0+IHtcclxuICAgICAgICBzbGlkZXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXHJcbiAgICAgICAgY3VycmVudFNsaWRlID0gKGN1cnJlbnRTbGlkZSArIDEpICUgc2xpZGVzLmxlbmd0aDtcclxuICAgICAgICBzbGlkZXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJldlNsaWRlKVxyXG4gICAgbmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbmV4dFNsaWRlKVxyXG59OyIsImZ1bmN0aW9uIHRvZ2dsZU1vYk1lbnUoKSB7XHJcbiAgICBjb25zdCBuYXZNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXYtbWVudVwiKTtcclxuICAgIGNvbnN0IG5hdlRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LXRvZ2dsZVwiKTtcclxuICAgIGNvbnN0IG5hdkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXYtY2xvc2VcIik7XHJcbiAgICBjb25zdCBuYXZTZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX3NlYXJjaC1mb3JtXCIpXHJcblxyXG4gICAgaWYgKG5hdk1lbnUpIHtcclxuICAgICAgICBuYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbmF2TWVudS5jbGFzc0xpc3QuYWRkKFwic2hvdy1tZW51XCIpO1xyXG4gICAgICAgICAgICBjbG9zZVNlYXJjaEZvcm0oKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuYXZDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1lbnVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvc2VTZWFyY2hGb3JtKCkge1xyXG4gICAgICAgIGlmIChuYXZTZWFyY2hGb3JtLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS1mb3JtXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYXZTZWFyY2hGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtZm9ybVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIl19
