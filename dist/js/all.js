"use strict";class Cart{async getItems(){try{const e=await fetch("/data/cart-data/cart-items.json");return await e.json()}catch(e){console.log(e)}}displayCartItems(e){let t="";e.forEach((e=>{t+=`\n                <figure class="cart__card">\n                    <div class="cart__box">\n                        <img src="${e.image}" alt="" class="cart__img">\n                    </div>\n                    <div class="cart__details">\n                        <h4 class="cart__title">${e.title}</h4>\n                        <span class="cart__price">${e.price} €</span>\n                        <div class="cart__amount">\n                            <div class="cart__amount-content">\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-down.svg" alt="" width="20px" height="20px">\n                                </span>\n                                <span class="cart_amount-number">0</span>\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-up.svg" alt="" width="20px" height="20px">\n                                </span>\n                            </div>\n                            <img src="/app/images/can-trash.svg" alt="" class="cart__amount-trash" width="20px" height="20px">\n                        </div>\n                    </div>\n                </figure>\n            `}));const n=document.querySelector(".cart__container");n&&n.insertAdjacentHTML("beforeend",t)}toggleCart(){const e=document.getElementById("cart"),t=document.getElementById("cart-shop"),n=document.getElementById("cart-close");t&&t.addEventListener("click",(()=>{e.classList.add("show-cart")})),n&&n.addEventListener("click",(()=>{e.classList.remove("show-cart")}))}}(async()=>{const e=new Cart,t=await e.getItems();e.displayCartItems(t),e.toggleCart()})();class Featured{getItems=async()=>{try{const e=await fetch("/data/featured-data/featured-items.json");return await e.json()}catch(e){console.error(e)}};displayItems=e=>{let t="";e.forEach((e=>{t+=`\n                <article class="featured__card">\n                    <span class="featured__tag">sale</span>\n                    <img src="${e.image}" alt="featured" class="featured__img">\n                    <div clas="featured__data">\n                        <h3 class="featured__title">${e.title}</h3>\n                        <span class="featured__price">${e.price}</span>\n                        <button class="button featured__button">add to cart</button>\n                    </div>\n                </article>\n            `}));const n=document.querySelector(".featured__container");n&&n.insertAdjacentHTML("beforeend",t)}}(async()=>{const e=new Featured,t=await e.getItems();e.displayItems(t)})();const domElements=()=>{const e=document.querySelector(".nav__list"),t=document.querySelector(".nav__menu");return{navList:e,navMenu:t,closeNavMenu:()=>{t&&t.classList.remove("show-menu")}}};let{navList:navList,navMenu:navMenu,closeNavMenu:closeNavMenu}=domElements();class NavLinks{getLinks=async()=>{try{const e=await fetch("/data/nav-data/navlinks.json");return await e.json()}catch(e){console.error(e)}};displayLinks=e=>{let t="";e.forEach((e=>{t+=`\n                <li class="nav__item">\n                    <a href="${e.link}" class="nav__link" onclick="closeNavMenu()">${e.text}</a>\n                </li>\n            `})),navList&&navList.insertAdjacentHTML("beforeend",t)}}(async()=>{const e=new NavLinks,t=await e.getLinks();e.displayLinks(t)})();class Drones{async getDrones(){try{const e=await fetch("/data/new-data/new-data.json");return await e.json()}catch(e){console.error(e)}}displayDrones=e=>{const t=document.querySelector(".new__container");e.forEach((e=>{t&&t.insertAdjacentHTML("beforeend",`\n                <article class="new__card">\n                    <span class="new__tag">New</span>\n                    <img src="${e.image}" alt="new drone" class="new__img">\n                    <div class="new__data">\n                        <h3 class="new__title">${e.title}</h3>\n                        <span class="new__price">${e.price}</span>\n                    </div>\n                    <ul class="new__social">\n                        <li>\n                            <a href="${e.faceUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.faceIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                        <li>\n                            <a href="${e.twitterUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.twitterIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                        <li>\n                            <a href="${e.instaUrl}" target="_blank" class="new__social-link">\n                                <img src="${e.instaIcon}" alt="" width="30px" height="30px">\n                            </a>\n                        </li>\n                    </ul>\n                </article>`)}))}}(async()=>{const e=new Drones,t=await e.getDrones();e.displayDrones(t)})();class Products{async getProducts(){try{const e=await fetch("/data/product-data/product-items.json");return await e.json()}catch(e){console.log(e)}}displayProducts(e){let t="";e.forEach((e=>{t+=`\n                <figure class="products__card">\n                    <img src="${e.image}" alt="" class="products__img">\n                    <h3 class="products__title">${e.title}</h3>\n                    <span class="products__price">${e.price} €</span>\n                    <button class="products__button">\n                        <img src="/app/images/shopping-cart.svg" alt="" width="30px" height="30px">\n                    </button>\n                </figure>\n            `}));const n=document.querySelector(".products__container");return n&&n.insertAdjacentHTML("beforeend",t),e}}(async()=>{const e=new Products,t=await e.getProducts();e.displayProducts(t)})();const globals=()=>({containers:[...document.querySelectorAll(".testimonial__slide")],slides:[...document.querySelectorAll(".testimonial__slide")],nextBtn:document.querySelector(".slider__button-next"),prevBtn:document.querySelector(".slider__button-prev"),currentSlide:0});let{containers:containers,slides:slides,nextBtn:nextBtn,prevBtn:prevBtn,currentSlide:currentSlide}={containers:[...document.querySelectorAll(".testimonial__slide")],slides:[...document.querySelectorAll(".testimonial__slide")],nextBtn:document.querySelector(".slider__button-next"),prevBtn:document.querySelector(".slider__button-prev"),currentSlide:0};class Testimonials{getSlides=async()=>{try{const e=await fetch("/data/slider-data/slides.json");return await e.json()}catch(e){console.error(e)}};displaySlides=e=>{containers&&containers.forEach(((t,n)=>{e.forEach(((e,a)=>{n===a&&(t.innerHTML=`\n                        <div class="testimonial__quote">\n                            <img src="${e.quote}" alt="" width="30px" height="30px">\n                        </div>\n                        <p class="testimonial__description">${e.description}</p>\n                        <h3 class="testimonial__date">${e.date}</h3>\n                        <div class="testimonial__profile">\n                            <img src="${e.image}" alt="user slide" class="testimonial__profile-img">\n                            <div class="testimonial__profile-data">\n                                <span class="testimonial__profile-name">${e.name}</span>\n                                <span class="testimonial__profile-detail">${e.detail}</span>\n                            </div>\n                        </div>`)}))}))};removeActive=(e,t)=>{e[t].classList.remove("active")};addActive=(e,t)=>{e[t].classList.add("active")};sliderAction(){prevBtn&&(prevBtn.onclick=()=>{this.removeActive(slides,currentSlide),currentSlide=(currentSlide-1+slides.length)%slides.length,this.addActive(slides,currentSlide)}),nextBtn&&(nextBtn.onclick=()=>{this.removeActive(slides,currentSlide),currentSlide=(currentSlide+1)%slides.length,this.addActive(slides,currentSlide)})}}(async()=>{const e=new Testimonials,t=await e.getSlides();e.displaySlides(t),e.sliderAction()})();class Team{async getTeam(){try{const e=await fetch("/data/team-data/team-data.json");return await e.json()}catch(e){console.error(e)}}displayTeam(e){const t=document.querySelector(".team__container");e.forEach((e=>{t&&t.insertAdjacentHTML("beforeend",`\n                    <div class="team__card">\n                        <div class="team__card-bcg">\n                            <img src="/app/images/bg-image.jpg" alt="">\n                        </div>\n                        <div class="team__member-pic">\n                            <img src="${e.image}" alt="member">\n                        </div>\n                        <div class="team__memeber-info">\n                            <h4 class="team__member-name">${e.name}</h4>\n                            <span>${e.title}</span>\n                            <p>${e.story}</p>\n                            <ul class="team__social">\n                                <li>\n                                    <a href="${e.faceUrl}" target="_blank">\n                                        <img src="${e.faceIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.twitterUrl}" target="_blank">\n                                        <img src="${e.twitterIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.instaUrl}" target="_blank">\n                                        <img src="${e.instaIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="${e.githubUrl}" target="_blank">\n                                        <img src="${e.githubIcon}" alt="" width="25px" height="25px">\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                `)}))}}function toggleSearch(){const e=document.querySelector(".nav__search"),t=document.querySelector(".nav__search-form"),n=document.querySelector(".close__search"),a=document.querySelector(".nav__search-input");t&&(e.addEventListener("click",(()=>{t.classList.toggle("active-form")})),n.addEventListener("click",(()=>{t.classList.remove("active-form"),a.value=""})))}function filterSearch(){const e=document.querySelector(".nav__search-input").value.toLowerCase();document.querySelectorAll("section").forEach((t=>{e&&t.id.toString().toLowerCase().indexOf(e)>-1&&document.getElementById(t.id).scrollIntoView()}))}function headerOnScroll(){const e=document.getElementById("header");document.body.scrollTop>0||document.documentElement.scrollTop>0?(e.style.background="#1f1f1f",e.style.boxShadow="0 1px 4px #0a0a0a4d"):0!==document.body.scrollTop&&0!==document.documentElement.scrollTop||(e.style.background="transparent",e.style.boxShadow="none")}function toggleMobMenu(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-toggle"),n=document.getElementById("nav-close"),a=document.querySelector(".nav__search-form");e&&(t.addEventListener("click",(()=>{e.classList.add("show-menu"),function(){if(a.classList.contains("active-form"))a.classList.remove("active-form")}()})),n.addEventListener("click",(()=>{e.classList.remove("show-menu")})))}(async()=>{const e=new Team,t=await e.getTeam();e.displayTeam(t)})(),window.onscroll=function(){headerOnScroll()},toggleMobMenu(),toggleSearch();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlDYXJ0SXRlbXMuanMiLCJkaXNwbGF5RmVhdHVyZWQuanMiLCJkaXNwbGF5TmF2TGlua3MuanMiLCJkaXNwbGF5TmV3LmpzIiwiZGlzcGxheVByb2RjdXRzLmpzIiwiZGlzcGxheVNsaWRlcy5qcyIsImRpc3BsYXlUZWFtLmpzIiwiZmlsdGVyU2VhcmNoLmpzIiwiaW5kZXguanMiLCJ0b2dnbGVNb2JNZW51LmpzIl0sIm5hbWVzIjpbIkNhcnQiLCJhc3luYyIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZGlzcGxheUNhcnRJdGVtcyIsIml0ZW1zIiwicmVzdWx0IiwiZm9yRWFjaCIsIml0ZW0iLCJpbWFnZSIsInRpdGxlIiwicHJpY2UiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0b2dnbGVDYXJ0IiwiY2FydCIsImdldEVsZW1lbnRCeUlkIiwiY2FydFNob3AiLCJjYXJ0Q2xvc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZ2V0SXRlbXMiLCJGZWF0dXJlZCIsImRpc3BsYXlJdGVtcyIsImVsZW1lbnQiLCJmZWF0dXJlZCIsImRvbUVsZW1lbnRzIiwibmF2TGlzdCIsIm5hdk1lbnUiLCJjbG9zZU5hdk1lbnUiLCJOYXZMaW5rcyIsImdldExpbmtzIiwiZGlzcGxheUxpbmtzIiwibGlua3MiLCJsaW5rIiwidGV4dCIsIm5hdkxpbmtzIiwiRHJvbmVzIiwiZGlzcGxheURyb25lcyIsImRyb25lcyIsImRyb25lIiwiZmFjZVVybCIsImZhY2VJY29uIiwidHdpdHRlclVybCIsInR3aXR0ZXJJY29uIiwiaW5zdGFVcmwiLCJpbnN0YUljb24iLCJhcGlEcm9uZXMiLCJnZXREcm9uZXMiLCJQcm9kdWN0cyIsImRpc3BsYXlQcm9kdWN0cyIsInByb2R1Y3RzIiwicHJvZHVjdCIsImFwaVByb2R1Y3RzIiwiZ2V0UHJvZHVjdHMiLCJnbG9iYWxzIiwiY29udGFpbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGlkZXMiLCJuZXh0QnRuIiwicHJldkJ0biIsImN1cnJlbnRTbGlkZSIsIlRlc3RpbW9uaWFscyIsImdldFNsaWRlcyIsImRpc3BsYXlTbGlkZXMiLCJjSWR4Iiwic2xpZGUiLCJzSWR4IiwiaW5uZXJIVE1MIiwicXVvdGUiLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJuYW1lIiwiZGV0YWlsIiwicmVtb3ZlQWN0aXZlIiwiYWRkQWN0aXZlIiwic2xpZGVyQWN0aW9uIiwib25jbGljayIsInRoaXMiLCJsZW5ndGgiLCJ0ZXN0aW1vbmlhbHMiLCJUZWFtIiwiZGlzcGxheVRlYW0iLCJtZW1iZXJzIiwibWVtYmVyIiwic3RvcnkiLCJnaXRodWJVcmwiLCJnaXRodWJJY29uIiwidG9nZ2xlU2VhcmNoIiwic2VhcmNoQnRuIiwibmF2U2VhcmNoRm9ybSIsImNsb3NlU2VhcmNoIiwiaW5wdXQiLCJ0b2dnbGUiLCJ2YWx1ZSIsImZpbHRlclNlYXJjaCIsInNlYXJjaFRlcm0iLCJ0b0xvd2VyQ2FzZSIsInNlY3Rpb24iLCJpZCIsInRvU3RyaW5nIiwiaW5kZXhPZiIsInNjcm9sbEludG9WaWV3IiwiaGVhZGVyT25TY3JvbGwiLCJoZWFkZXIiLCJib2R5Iiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiYm94U2hhZG93IiwidG9nZ2xlTW9iTWVudSIsIm5hdlRvZ2dsZSIsIm5hdkNsb3NlIiwiY29udGFpbnMiLCJjbG9zZVNlYXJjaEZvcm0iLCJ0ZWFtIiwiZ2V0VGVhbSIsIndpbmRvdyIsIm9uc2Nyb2xsIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQUFBLEtBQ0FDLGlCQUNBLElBQ0EsTUFBQUMsUUFBQUMsTUFBQSxtQ0FFQSxhQURBRCxFQUFBRSxPQUdBLE1BQUFDLEdBQ0FDLFFBQUFDLElBQUFGLElBSUFHLGlCQUFBQyxHQUNBLElBQUFDLEVBQUEs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QUFBLE9BS0EsU0FBQUMsZUFDQSxNQUNBQyxFQURBdkYsU0FBQUMsY0FBQSxzQkFDQW9GLE1BQUFHLGNBQ0F4RixTQUFBZ0QsaUJBQUEsV0FFQXRELFNBQUErRixJQUNBRixHQUFBRSxFQUFBQyxHQUFBQyxXQUFBSCxjQUFBSSxRQUFBTCxJQUFBLEdBQ0F2RixTQUFBSyxlQUFBb0YsRUFBQUMsSUFBQUcsb0JDdkJBLFNBQUFDLGlCQUNBLE1BQUFDLEVBQUEvRixTQUFBSyxlQUFBLFVBRUFMLFNBQUFnRyxLQUFBQyxVQUFBLEdBQUFqRyxTQUFBa0csZ0JBQUFELFVBQUEsR0FDQUYsRUFBQUksTUFBQUMsV0FBQSxVQUNBTCxFQUFBSSxNQUFBRSxVQUFBLHVCQUVBLElBQUFyRyxTQUFBZ0csS0FBQUMsV0FBQSxJQUFBakcsU0FBQWtHLGdCQUFBRCxZQUNBRixFQUFBSSxNQUFBQyxXQUFBLGNBQ0FMLEVBQUFJLE1BQUFFLFVBQUEsUUNYQSxTQUFBQyxnQkFDQSxNQUFBbkYsRUFBQW5CLFNBQUFLLGVBQUEsWUFDQWtHLEVBQUF2RyxTQUFBSyxlQUFBLGNBQ0FtRyxFQUFBeEcsU0FBQUssZUFBQSxhQUNBNEUsRUFBQWpGLFNBQUFDLGNBQUEscUJBRUFrQixJQUNBb0YsRUFBQS9GLGlCQUFBLFNBQUEsS0FDQVcsRUFBQVYsVUFBQUMsSUFBQSxhQVNBLFdBQ0EsR0FBQXVFLEVBQUF4RSxVQUFBZ0csU0FBQSxlQUNBeEIsRUFBQXhFLFVBQUFFLE9BQUEsZUFWQStGLE1BR0FGLEVBQUFoRyxpQkFBQSxTQUFBLEtBQ0FXLEVBQUFWLFVBQUFFLE9BQUEsaUJIK0NBLFdBQ0EsTUFBQWdHLEVBQUEsSUFBQW5DLEtBQ0FFLFFBQUFpQyxFQUFBQyxVQUNBRCxFQUFBbEMsWUFBQUMsSUFIQSxHRTdDQW1DLE9BQUFDLFNBQUEsV0FDQWhCLGtCQUlBUSxnQkFDQXZCIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBDYXJ0IHtcclxuICAgIGFzeW5jIGdldEl0ZW1zKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9jYXJ0LWRhdGEvY2FydC1pdGVtcy5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5Q2FydEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IGBcclxuICAgICAgICAgICAgICAgIDxmaWd1cmUgY2xhc3M9XCJjYXJ0X19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcnRfX2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5pbWFnZX1cIiBhbHQ9XCJcIiBjbGFzcz1cImNhcnRfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0X19kZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImNhcnRfX3RpdGxlXCI+JHtpdGVtLnRpdGxlfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fcHJpY2VcIj4ke2l0ZW0ucHJpY2V9IOKCrDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcnRfX2Ftb3VudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcnRfX2Ftb3VudC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJ0X19hbW91bnQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiL2FwcC9pbWFnZXMvY2hldnJvbi1kb3duLnN2Z1wiIGFsdD1cIlwiIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJ0X2Ftb3VudC1udW1iZXJcIj4wPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fYW1vdW50LWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2NoZXZyb24tdXAuc3ZnXCIgYWx0PVwiXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvYXBwL2ltYWdlcy9jYW4tdHJhc2guc3ZnXCIgYWx0PVwiXCIgY2xhc3M9XCJjYXJ0X19hbW91bnQtdHJhc2hcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9maWd1cmU+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FydF9fY29udGFpbmVyXCIpXHJcbiAgICAgICAgaWYgKGNvbnRhaW5lcikgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCByZXN1bHQpXHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQ2FydCgpIHtcclxuICAgICAgICBjb25zdCBjYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXJ0XCIpXHJcbiAgICAgICAgY29uc3QgY2FydFNob3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhcnQtc2hvcFwiKVxyXG4gICAgICAgIGNvbnN0IGNhcnRDbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FydC1jbG9zZVwiKVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGNhcnRTaG9wKSB7XHJcbiAgICAgICAgICAgIGNhcnRTaG9wLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJ0LmNsYXNzTGlzdC5hZGQoXCJzaG93LWNhcnRcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoY2FydENsb3NlKSB7XHJcbiAgICAgICAgICAgIGNhcnRDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FydC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1jYXJ0XCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBuZXcgQ2FydCgpXHJcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGNhcnQuZ2V0SXRlbXMoKVxyXG4gICAgY2FydC5kaXNwbGF5Q2FydEl0ZW1zKGl0ZW1zKVxyXG4gICAgY2FydC50b2dnbGVDYXJ0KClcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgRmVhdHVyZWQge1xyXG4gICAgZ2V0SXRlbXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL2ZlYXR1cmVkLWRhdGEvZmVhdHVyZWQtaXRlbXMuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtcylcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUl0ZW1zID0gaXRlbXMgPT4ge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gXCJcIjtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50ICs9IGBcclxuICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiZmVhdHVyZWRfX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZlYXR1cmVkX190YWdcIj5zYWxlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmltYWdlfVwiIGFsdD1cImZlYXR1cmVkXCIgY2xhc3M9XCJmZWF0dXJlZF9faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzPVwiZmVhdHVyZWRfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZmVhdHVyZWRfX3RpdGxlXCI+JHtpdGVtLnRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmVhdHVyZWRfX3ByaWNlXCI+JHtpdGVtLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBmZWF0dXJlZF9fYnV0dG9uXCI+YWRkIHRvIGNhcnQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgYFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmVhdHVyZWRfX2NvbnRhaW5lclwiKTtcclxuICAgICAgICBpZihjb250YWluZXIpIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgZWxlbWVudClcclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBmZWF0dXJlZCA9IG5ldyBGZWF0dXJlZCgpXHJcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGZlYXR1cmVkLmdldEl0ZW1zKClcclxuICAgIGZlYXR1cmVkLmRpc3BsYXlJdGVtcyhpdGVtcylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY29uc3QgZG9tRWxlbWVudHMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBuYXZMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX2xpc3RcIilcclxuICAgIGNvbnN0IG5hdk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbWVudVwiKVxyXG4gICAgY29uc3QgY2xvc2VOYXZNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChuYXZNZW51KSB7XHJcbiAgICAgICAgICAgIG5hdk1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbWVudVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7bmF2TGlzdCwgbmF2TWVudSwgY2xvc2VOYXZNZW51fVxyXG59O1xyXG5cclxubGV0IHtuYXZMaXN0LCBuYXZNZW51LCBjbG9zZU5hdk1lbnV9ID0gZG9tRWxlbWVudHMoKVxyXG5cclxuY2xhc3MgTmF2TGlua3Mge1xyXG4gICAgZ2V0TGlua3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL25hdi1kYXRhL25hdmxpbmtzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgbGlua3MgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaW5rcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlMaW5rcyA9IGxpbmtzID0+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICAgICAgICBsaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2X19pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7bGluay5saW5rfVwiIGNsYXNzPVwibmF2X19saW5rXCIgb25jbGljaz1cImNsb3NlTmF2TWVudSgpXCI+JHtsaW5rLnRleHR9PC9hPlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgYFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChuYXZMaXN0KSBuYXZMaXN0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCByZXN1bHQpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbmF2TGlua3MgPSBuZXcgTmF2TGlua3MoKVxyXG4gICAgY29uc3QgbGlua3MgPSBhd2FpdCBuYXZMaW5rcy5nZXRMaW5rcygpXHJcblxyXG4gICAgbmF2TGlua3MuZGlzcGxheUxpbmtzKGxpbmtzKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBEcm9uZXMge1xyXG4gICAgYXN5bmMgZ2V0RHJvbmVzKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9uZXctZGF0YS9uZXctZGF0YS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGRyb25lcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gZHJvbmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheURyb25lcyA9IGRyb25lcyA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdfX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGRyb25lcy5mb3JFYWNoKGRyb25lID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICA8YXJ0aWNsZSBjbGFzcz1cIm5ld19fY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmV3X190YWdcIj5OZXc8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Ryb25lLmltYWdlfVwiIGFsdD1cIm5ldyBkcm9uZVwiIGNsYXNzPVwibmV3X19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmV3X19kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cIm5ld19fdGl0bGVcIj4ke2Ryb25lLnRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmV3X19wcmljZVwiPiR7ZHJvbmUucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cIm5ld19fc29jaWFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2Ryb25lLmZhY2VVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJuZXdfX3NvY2lhbC1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Ryb25lLmZhY2VJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7ZHJvbmUudHdpdHRlclVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cIm5ld19fc29jaWFsLWxpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7ZHJvbmUudHdpdHRlckljb259XCIgYWx0PVwiXCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtkcm9uZS5pbnN0YVVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cIm5ld19fc29jaWFsLWxpbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7ZHJvbmUuaW5zdGFJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9hcnRpY2xlPmBcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgZHJvbmVzID0gbmV3IERyb25lcygpXHJcbiAgICBjb25zdCBhcGlEcm9uZXMgPSBhd2FpdCBkcm9uZXMuZ2V0RHJvbmVzKClcclxuICAgIGRyb25lcy5kaXNwbGF5RHJvbmVzKGFwaURyb25lcylcclxufSkoKTsiLCJjbGFzcyBQcm9kdWN0c3tcclxuICAgIGFzeW5jIGdldFByb2R1Y3RzKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9wcm9kdWN0LWRhdGEvcHJvZHVjdC1pdGVtcy5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5UHJvZHVjdHMocHJvZHVjdHMpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICAgICAgICBwcm9kdWN0cy5mb3JFYWNoKHByb2R1Y3QgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGZpZ3VyZSBjbGFzcz1cInByb2R1Y3RzX19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1hZ2V9XCIgYWx0PVwiXCIgY2xhc3M9XCJwcm9kdWN0c19faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicHJvZHVjdHNfX3RpdGxlXCI+JHtwcm9kdWN0LnRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0c19fcHJpY2VcIj4ke3Byb2R1Y3QucHJpY2V9IOKCrDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvZHVjdHNfX2J1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL3Nob3BwaW5nLWNhcnQuc3ZnXCIgYWx0PVwiXCIgd2lkdGg9XCIzMHB4XCIgaGVpZ2h0PVwiMzBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9maWd1cmU+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdHNfX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCByZXN1bHQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgIH1cclxufTtcclxuXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBhcGlQcm9kdWN0cyA9IG5ldyBQcm9kdWN0cygpXHJcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGFwaVByb2R1Y3RzLmdldFByb2R1Y3RzKClcclxuICAgIGFwaVByb2R1Y3RzLmRpc3BsYXlQcm9kdWN0cyhwcm9kdWN0cylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY29uc3QgZ2xvYmFscyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZXN0aW1vbmlhbF9fc2xpZGVcIildXHJcbiAgICBjb25zdCBzbGlkZXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZXN0aW1vbmlhbF9fc2xpZGVcIildXHJcbiAgICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2J1dHRvbi1uZXh0XCIpXHJcbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2J1dHRvbi1wcmV2XCIpXHJcbiAgICBsZXQgY3VycmVudFNsaWRlID0gMDtcclxuXHJcbiAgICByZXR1cm4ge2NvbnRhaW5lcnMsIHNsaWRlcywgbmV4dEJ0biwgcHJldkJ0biwgY3VycmVudFNsaWRlfVxyXG59XHJcblxyXG5sZXQge2NvbnRhaW5lcnMsIHNsaWRlcywgbmV4dEJ0biwgcHJldkJ0biwgY3VycmVudFNsaWRlfSA9IGdsb2JhbHMoKVxyXG5cclxuY2xhc3MgVGVzdGltb25pYWxzIHtcclxuICAgIGdldFNsaWRlcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvc2xpZGVyLWRhdGEvc2xpZGVzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBzbGlkZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5U2xpZGVzID0gc2xpZGVzID0+IHtcclxuICAgICAgICBpZiAoY29udGFpbmVycykge1xyXG4gICAgICAgICAgICBjb250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lciwgY0lkeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzLmZvckVhY2goKHNsaWRlLCBzSWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNJZHggPT09IHNJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlc3RpbW9uaWFsX19xdW90ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLnF1b3RlfVwiIGFsdD1cIlwiIHdpZHRoPVwiMzBweFwiIGhlaWdodD1cIjMwcHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGVzdGltb25pYWxfX2Rlc2NyaXB0aW9uXCI+JHtzbGlkZS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cInRlc3RpbW9uaWFsX19kYXRlXCI+JHtzbGlkZS5kYXRlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXN0aW1vbmlhbF9fcHJvZmlsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3NsaWRlLmltYWdlfVwiIGFsdD1cInVzZXIgc2xpZGVcIiBjbGFzcz1cInRlc3RpbW9uaWFsX19wcm9maWxlLWltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlc3RpbW9uaWFsX19wcm9maWxlLWRhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRlc3RpbW9uaWFsX19wcm9maWxlLW5hbWVcIj4ke3NsaWRlLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGVzdGltb25pYWxfX3Byb2ZpbGUtZGV0YWlsXCI+JHtzbGlkZS5kZXRhaWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBY3RpdmUgPSAoaXRlbSwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGl0ZW1bZWxlbWVudF0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEFjdGl2ZSA9IChpdGVtLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaXRlbVtlbGVtZW50XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGVyQWN0aW9uKCl7XHJcbiAgICAgICAgaWYgKHByZXZCdG4pIHtcclxuICAgICAgICAgICAgcHJldkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoc2xpZGVzLCBjdXJyZW50U2xpZGUpXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUgPSAoY3VycmVudFNsaWRlIC0gMSArIHNsaWRlcy5sZW5ndGgpICUgc2xpZGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZlKHNsaWRlcywgY3VycmVudFNsaWRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKG5leHRCdG4pIHtcclxuICAgICAgICAgICAgbmV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUoc2xpZGVzLCBjdXJyZW50U2xpZGUpXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUgPSAoY3VycmVudFNsaWRlICsgMSkgJSBzbGlkZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBY3RpdmUoc2xpZGVzLCBjdXJyZW50U2xpZGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgdGVzdGltb25pYWxzID0gbmV3IFRlc3RpbW9uaWFscygpXHJcbiAgICBjb25zdCBzbGlkZXMgPSBhd2FpdCB0ZXN0aW1vbmlhbHMuZ2V0U2xpZGVzKClcclxuICAgIHRlc3RpbW9uaWFscy5kaXNwbGF5U2xpZGVzKHNsaWRlcylcclxuICAgIHRlc3RpbW9uaWFscy5zbGlkZXJBY3Rpb24oKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jbGFzcyBUZWFtIHtcclxuICAgIGFzeW5jIGdldFRlYW0oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL3RlYW0tZGF0YS90ZWFtLWRhdGEuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBtZW1iZXJzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBtZW1iZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5VGVhbShtZW1iZXJzKSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWFtX19jb250YWluZXJcIilcclxuICAgICAgICBtZW1iZXJzLmZvckVhY2gobWVtYmVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlYW1fX2NhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlYW1fX2NhcmQtYmNnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2JnLWltYWdlLmpwZ1wiIGFsdD1cIlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlYW1fX21lbWJlci1waWNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttZW1iZXIuaW1hZ2V9XCIgYWx0PVwibWVtYmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVhbV9fbWVtZWJlci1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJ0ZWFtX19tZW1iZXItbmFtZVwiPiR7bWVtYmVyLm5hbWV9PC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7bWVtYmVyLnRpdGxlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7bWVtYmVyLnN0b3J5fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cInRlYW1fX3NvY2lhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7bWVtYmVyLmZhY2VVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bWVtYmVyLmZhY2VJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMjVweFwiIGhlaWdodD1cIjI1cHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHttZW1iZXIudHdpdHRlclVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttZW1iZXIudHdpdHRlckljb259XCIgYWx0PVwiXCIgd2lkdGg9XCIyNXB4XCIgaGVpZ2h0PVwiMjVweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke21lbWJlci5pbnN0YVVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHttZW1iZXIuaW5zdGFJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMjVweFwiIGhlaWdodD1cIjI1cHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHttZW1iZXIuZ2l0aHViVXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke21lbWJlci5naXRodWJJY29ufVwiIGFsdD1cIlwiIHdpZHRoPVwiMjVweFwiIGhlaWdodD1cIjI1cHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIGApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHRlYW0gPSBuZXcgVGVhbSgpXHJcbiAgICBjb25zdCBtZW1iZXJzID0gYXdhaXQgdGVhbS5nZXRUZWFtKClcclxuICAgIHRlYW0uZGlzcGxheVRlYW0obWVtYmVycylcclxufSkoKTsiLCJmdW5jdGlvbiB0b2dnbGVTZWFyY2goKSB7XHJcbiAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fc2VhcmNoXCIpXHJcbiAgICBjb25zdCBuYXZTZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX3NlYXJjaC1mb3JtXCIpXHJcbiAgICBjb25zdCBjbG9zZVNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2VfX3NlYXJjaFwiKVxyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fc2VhcmNoLWlucHV0XCIpO1xyXG5cclxuICAgIGlmIChuYXZTZWFyY2hGb3JtKSB7XHJcbiAgICAgICAgc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5hdlNlYXJjaEZvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS1mb3JtXCIpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY2xvc2VTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbmF2U2VhcmNoRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWZvcm1cIilcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlclNlYXJjaCgpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX3NlYXJjaC1pbnB1dFwiKVxyXG4gICAgY29uc3Qgc2VhcmNoVGVybSA9IGlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlY3Rpb25cIilcclxuXHJcbiAgICBzZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgIGlmIChzZWFyY2hUZXJtICYmIHNlY3Rpb24uaWQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoVGVybSkgPiAtMSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWN0aW9uLmlkKS5zY3JvbGxJbnRvVmlldygpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuZnVuY3Rpb24gaGVhZGVyT25TY3JvbGwoKSB7XHJcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlclwiKTtcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPiAwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgICAgaGVhZGVyLnN0eWxlLmJhY2tncm91bmQgPSBcIiMxZjFmMWZcIjtcclxuICAgICAgICBoZWFkZXIuc3R5bGUuYm94U2hhZG93ID0gXCIwIDFweCA0cHggIzBhMGEwYTRkXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID09PSAwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPT09IDApe1xyXG4gICAgICAgIGhlYWRlci5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgIGhlYWRlci5zdHlsZS5ib3hTaGFkb3cgPSBcIm5vbmVcIlxyXG4gICAgfVxyXG59O1xyXG5cclxud2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBoZWFkZXJPblNjcm9sbCgpXHJcbn07XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdG9nZ2xlTW9iTWVudSgpXHJcbiAgICB0b2dnbGVTZWFyY2goKVxyXG59KSgpO1xyXG4iLCJmdW5jdGlvbiB0b2dnbGVNb2JNZW51KCkge1xyXG4gICAgY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LW1lbnVcIik7XHJcbiAgICBjb25zdCBuYXZUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdi10b2dnbGVcIik7XHJcbiAgICBjb25zdCBuYXZDbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LWNsb3NlXCIpO1xyXG4gICAgY29uc3QgbmF2U2VhcmNoRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19zZWFyY2gtZm9ybVwiKVxyXG5cclxuICAgIGlmIChuYXZNZW51KSB7XHJcbiAgICAgICAgbmF2VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5hdk1lbnUuY2xhc3NMaXN0LmFkZChcInNob3ctbWVudVwiKTtcclxuICAgICAgICAgICAgY2xvc2VTZWFyY2hGb3JtKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmF2Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbmF2TWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tZW51XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlU2VhcmNoRm9ybSgpIHtcclxuICAgICAgICBpZiAobmF2U2VhcmNoRm9ybS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmUtZm9ybVwiKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmF2U2VhcmNoRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLWZvcm1cIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiJdfQ==
